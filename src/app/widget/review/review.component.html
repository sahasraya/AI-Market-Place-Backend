<div class="overlay" *ngIf="visible" (click)="onOverlayClick()"></div>
<div class="popup review-popup" *ngIf="visible && review" (click)="$event.stopPropagation()">
    <div class="popup-header">
        <h2 class="popup-title">
            <span class="material-icons">rate_review</span>
            Review Details
        </h2>
        <button class="close-btn" (click)="closePopup()">
            <span class="material-icons">close</span>
        </button>
    </div>

    <div class="popup-body">
        <!-- Review Details -->
        <div class="review-detail">
            <div class="detail-section">
                <h3 class="detail-name">{{ review.productName }}</h3>
                <p class="review-date-large">{{ review.createdDate | date: 'MMMM dd, yyyy' }}</p>
            </div>

            <div class="detail-section">
                <h4><span class="material-icons">info</span> Usage Information</h4>
                <div class="info-grid">
                    <div class="info-item">
                        <strong>Usage Type:</strong>
                        <span class="badge">{{ review.usageType }}</span>
                    </div>
                    <div class="info-item">
                        <strong>Usage Duration:</strong>
                        <span>{{ review.usageDuration }}</span>
                    </div>
                    <div class="info-item">
                        <strong>Paid Version:</strong>
                        <span class="badge" [class.success]="review.usingPaidVersion">
                            {{ review.usingPaidVersion ? 'Yes' : 'No' }}
                        </span>
                    </div>
                </div>
            </div>

            <div class="detail-section">
                <h4><span class="material-icons">star</span> Ratings</h4>
                
                <div class="rating-detail">
                    <div class="rating-label-large">Overall Experience</div>
                    <div class="stars-large">
                        <span *ngFor="let star of getStars(review.overallExperience)" class="material-icons">{{ star }}</span>
                    </div>
                    <div class="rating-score">{{ review.overallExperience }}/5</div>
                </div>

                <div class="rating-detail">
                    <div class="rating-label-large">Efficiency</div>
                    <div class="stars-large">
                        <span *ngFor="let star of getStars(review.efficiencyRating)" class="material-icons">{{ star }}</span>
                    </div>
                    <div class="rating-score">{{ review.efficiencyRating }}/5</div>
                </div>

                <div class="rating-detail">
                    <div class="rating-label-large">Documentation Quality</div>
                    <div class="stars-large">
                        <span *ngFor="let star of getStars(review.documentationRating)" class="material-icons">{{ star }}</span>
                    </div>
                    <div class="rating-score">{{ review.documentationRating }}/5</div>
                </div>

                <div class="rating-detail" *ngIf="review.usingPaidVersion">
                    <div class="rating-label-large">Paid Version Rating</div>
                    <div class="stars-large">
                        <span *ngFor="let star of getStars(review.paidVersionRating)" class="material-icons">{{ star }}</span>
                    </div>
                    <div class="rating-score">{{ review.paidVersionRating }}/5</div>
                </div>
            </div>

            <div class="detail-section">
                <h4><span class="material-icons">comment</span> Comments</h4>
                <div class="comment-box">
                    <p>{{ review.otherComments }}</p>
                </div>
            </div>
        </div>
    </div>
</div>